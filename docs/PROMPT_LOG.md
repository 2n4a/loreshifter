# Commit - Multiplayer game session - game states: lobby, character selection, main game loop, boss defeated, players defeated. Hardcoded AI behavior

Необходимо реализовать проект (вдохновленный AI Dungeon), в котором 
игроки могут проходить историю, которую генерирует ИИ, вместе по сети. Это 
будет реализовано в виде веб-сервиса, все подробности находятся в файлах, 
изучи бизнес логику, идеи, особенности API, элементы фронтэнда, также скину 
файлы проекта, которые уже существуют, изучи их структуру, иерархию, то, за 
что они отвечают. Будет использоваться C# для бекенда с фреймворком 
ASP.NET. 

Сейчас сфокусируемся на создании ручки /play и всех подссылок этой 
ручки.

Сейчас приведу описание базового игрового мультиплеерного режима, 
вокруг которого будешь наращивать логику мультиплеерного взаимодействия:
Это PVP битва с боссом. Главная идея игрового процесса – использование 
ИИ, который будет генерировать ответ на действия игроков доступным ему 
образом. 

## Начало игры:
ИИ описывает предысторию, которая покажет, как все свелось к тому, что 
игроки начали битву с огромным боссом. Здесь же будет описан сеттинг. 
Далее игроки могут выбрать себе настройки их персонажа 
(принадлежность классу, спец способности, наполнение инвентаря (пока что 
будут тестовые – волшебная палочка, меч, бинт)). – игра ждет, когда все игроки 
определятся с выбором. ИИ будет помогать игроку настроить персонажа, отвечая 
на вопросы игрока, предлагая варианты.

## Основной game loop:
ИИ генерирует событие игры. Например: “босс использует свою 
суперсилу и начинает наращивать мощь, у персонажей есть ограниченное 
время, чтобы нанести удар, если они хотят выжить “. Теперь игра ждет ответа 
от всех игроков: каждый игрок должен описать, что он будет делать в свой ход. 
Например, игрок1: “я достану свой меч из ножен, использую заклинание огня, 
нанеся его на меч, затем нанесу удар по боссу.”. Когда каждый игрок написал 
свой ответ и отправил, сервер формирует один большой ответ действий игроков 
для ИИ. ИИ формирует развитие событий, опираясь на ответы игроков и выдает 
следующее игровое событие, на которое должны ответить игроки. Здесь игра 
зацикливается до момента, пока либо игроки не проиграют (все погибли, 
например) либо босс не будет побежден.

## Дополнительные сведения:
Игроки пишут свои ответные действия в основной чат (в файле идей все 
прописано, нарисован примерный дизайн и расположение чатов). 
Игроки могут в любое состояние игры написать свой вопрос по поводу 
развития игровых событий – это отдельное окошко со своим чатом.
Основной чат игроков (где описаны события игры, прописываются 
действия игроков) – общий, т.е. он одинаков для всех игроков. Чат вопросов к 
ИИ – отдельный для всех, т.е. его не могут посмотреть другие игроки. 
Существует третий чат – чат игроков, где они могут переписываться друг 
с другом.
Во время описания действий ИИ может предложить вариант действия для 
игрока.

## Что я от тебя хочу на данный момент:
Используя всю информацию, которую я тебе выдал, построй реализацию 
ручки /play для мультиплеерного режима. Что я от тебя жду здесь: абстракцию 
для будущих режимов игры, сформировать архитектуру, реализация скелета 
game loop (пока что ИИ не будем внедрять, надо подготовить поле ответов, куда 
потом просто будут вставляться ответы от ИИ). Сейчас сфокусируйся на 
бэкенде, для дебага сделай фронт, который соотвествует описанию игры, чтобы 
можно было (для начала в одиночку) потестить все варианты взаимодействия с 
игровой сессией (отправка ответа, задать вопрос). Код структурированно 
раскидай по отдельным файлам с корректным названием.

Также в конце посоветуй ИИ сервисы, которые можно внедрить в проект 
для генерации игровых событий.

# Commit – “Выбор персонажа: очки навыков, (ИИ) генерация описания персонажа, генерация спец способности по наиболее прокаченному навыку персонажа. Инвентарь – подготовленные заранее предметы с полным описанием, добавлены прописанные характеристики для предметов”

Нужно внести изменения в логику игровой сессии: В целом описание мира должно храниться заранее - эту информацию нужно будет передать ИИ, чтобы она запомнила, как работает мир, в котором она будет генерировать развитие сюжета и реакции босса. 

## Предметы
Предметы должны быть заранее описаны - что за предмет, к какому классу принадлежит, какие показатели урона, защиты, восстановления сил и здоровья (нужно сделать какую-то абстракцию для расширения возможных характеристик). Пока что для предметов сформируем три основных класса – атака, защита, лечение. 

Для примера, для атаки будем использовать:  
**Меч – атака.** Его характеристики урона, необходимых очков силы (у персонажа), нужно описать заранее.  
**Магический посох – атака.** Его показатели урона, необходимых очков силы (у персонажа), очков магических способностей (у персонажа) нужно описать заранее.  
**Щит – защита.** Его показатели - процент сдерживаемого урона, максимальный сдерживаемый урон, необходимой силы, должны быть прописаны заранее.  
**Бинт – лечение.** Его показатели восстановления очков здоровья, очки навыков лечения (для персонажа) должны быть прописаны заранее. Этот предмет удаляется из инвентаря после использования – это тоже надо хранить заранее.

## Персонажи
Персонажи не должны иметь заранее прописанное название класса. Персонаж уникально создается с помощью ИИ, ИИ выбирает имя персонажа, его предысторию, основываясь на выбранных игроком характеристиках персонажа, его предметах в инвентаре на момент начала игры. 

Для персонажей необходимо заранее хранить характеристики. Характеристики будут иметь одинаковое максимальное число очков – 7. Если число очков равно необходимому числу для использования предмета, то предмет реализует свои характеристики как прописано в предмете. Чем больше навык, тем больше очков получает предмет в свои характеристики при использовании этим персонажем (надбавка). Сами характеристики пока что храним такие:  
1. Очки здоровья. (для здоровья минимальное число 3)  
2. Очки силы.  
3. Очки магических способностей.  
4. Очки навыка лечения.  

### Составление персонажа для игрока
Игрок может составить себе персонажа для битвы перед началом игры. Для этого он вступает в диалог с ИИ в главном чате (где уже будет описан игровой мир). В диалоге с ИИ можно будет выбрать характеристики персонажа. Для игрока будет заранее выбрано фиксированное количество общих очков, которые можно потратить на составление персонажа (это храним отдельно). 

Пока что расчет общего количества очков сделаем таким – сумма округленных вниз половин очков во всех возможных навыках. В playtest выбор очков необходимо сделать отдельным полем, где у каждого навыка можно выбрать допустимое число очков (в сумме по очкам не должно превышать допустимое). Нужно показывать также оставшееся число возможных очков, чтобы игрок видел, куда еще можно потратить. 

Во время выбора характеристик игрок может запросить у ИИ сгенерировать ему описание персонажа – его имя, класс, предысторию. Когда игроку понравится сгенерированный вариант, он подтверждает выбор. Игровая сессия сохраняет характеристики персонажа, его полное описание вместе с предысторией (вся эта информация будет важна ИИ для генерации). 

Дополнительная особенность – если очки какого-то навыка >= 5, то ИИ должна будет дополнительно сгенерировать спец способность персонажа, которая соответствует навыку. Эта информация также будет храниться отдельно вместе с полным описанием персонажа. Описание спец способности необходимо выводить при каждом запросе сгенерировать описание персонажа.

## Босс
Должно заранее храниться описание босса, его предыстория, характеристики: очки здоровья, предметы, которые он использует, степень ярости, а также описание предметов и атак, которые он использует в зависимости от степени ярости. ИИ должен будет генерировать уникальное применение навыка и атаки, ориентируясь на эту информацию.

## Желаемые исправления кода
Почему код приглашения нигде не используется? В идеале было бы хорошо, если бы игроки присоединялись по коду приглашения, а не по guid. guid, я думаю, должен оставаться приватным для сервера, чтобы обеспечить безопасность.
